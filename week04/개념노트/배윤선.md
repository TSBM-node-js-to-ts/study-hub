컴퓨터 메모리에 저장됐던 데이터들은 서버가 종료되면 메모리도 정리되면서 저장했던 데이터들도 사라지게 된다. 이를 방지하기 위해 **데이터베이스**가 필요한 것이다. 

대표적인 데이터베이스

- MySQL(관계형 데이터베이스)
- MongoDB(NoSQL)

# 데이터베이스란?

- 관련성을 가지며 중복이 없는 데이터들의 집합을 **데이터베이스**라 함
    - 서버의 하드디스크나 SSD등의 저장매체에 데이터를 저장 → 서버 종료 여부와 관계없이 데이터를 계속 사용할 수 있음
    - 서버에 데이터베이스를 올리면 여러 사람이 동시에 사용할 수 있음
    - 사람들에게 각각 다른 권한(읽기, 수정 등)을 줄 수 있음
- 데이터베이스를 관리하는 시스템을 **DBMS**라 함

# 데이터베이스 및 테이블 생성하기

## 데이터베이스 생성하기

```bash
 명령어 : mysql -u root
//Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 9.5.0 Homebrew

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> CREATE SCHEMA `nodejs`DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_general_ci;
Query OK, 1 row affected (0.003 sec)

mysql> use nodejs
Database changed
mysql> 

```

![스크린샷 2025-11-08 오후 9.11.27.png](attachment:fd44923b-832e-4f86-9aa6-95ff46438e0d:스크린샷_2025-11-08_오후_9.11.27.png)

- `DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_general_ci;` → 한글과 이모티콘을 사용할 수 있게 함

📌 MySQL 8버전의 기본 COLLATE는 utf8mb4_0900_ai_ci이지만 한글문제가 있으므로 여기선 utf8mb4_general_ci를 사용

- SQL구문은 마지막에 세미콜론( ; )을 붙여야 해당 구문이 실행됨(그렇지 않으면 프롬프트가 다음줄로 넘어가서 다른 입력이 들어오길 기다리게 됨…)
- 예약어(CREATE SCHEMA와 같이 MySQL이 기본적으로 알고 있는 구문)는 가급적 대문자로 작성

## 테이블 생성하기

테이블이란?

→ 데이터가 들어갈 수 있는 틀을 의미. 테이블에 맞는 데이터만 들어갈 수 있다… 

```bash
CREATE TABLE nodejs.user(
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    age INT UNSIGNED NOT NULL,
    married TINYINT NOT NULL,
    comment TEXT NULL,
    created_at DATETIME NOT NULL DEFAULT now(),
    PRIMARY KEY(id),
    UNIQUE INDEX name_UNIQUE (name ASC)
)
COMMENT = '사용자 정보'
ENGINE = InnoDB;
Query OK, 0 rows affected (0.010 sec)
```



- `CREATE TABLE[데이터베이스명.테이블명]` : 테이블을 생성함
    - 예시) CREATE TABLE nodejs.user → nodejs라는 데이터베이스 안에 users라는 테이블을 생성하라는 것임
- 콤마( , )로 구분하며 id(고유 식별자), name, age, married, comment, created_at(로우 생성일)라는 컬럼들을 생성함
    - 이렇게 컬럼을 정의해두면 데이터를 넣을 때 컬럼규칙에 맞는 정보들만 넣을 수 있음
    - 만들어두지 않은 컬럼의 정보들은 저장할 수 없음

<aside>

### 컬럼과 로우

컬럼 : 세로줄(세로 필드의 집합)

로우 : 가로줄(가로 필드의 집합)

필드 : 컬럼과 로우가 교차하는 칸 하나

</aside>

### 컬럼의 자료형

- INT
    - 정수
    - 소수까지 저장하고 싶다면 FLOAT나 DOUBLE자료형을 사용하면됨
- VARCHAR
    - 자릿수 - 가변 길이
    - 예를들어, VARCHAR(10)라면 길이가 0~10인 문자열을 넣을 수 있는 거임
- CHAR
    - 자릿수 - 고정 길이
    - VARCHAR과는 다르게 CHAR(10)이면 반드시 길이가 10인 문자열만 넣어야 됨
    - CHAR에 주어진 길이보다 짧은 문자열을 넣게 되면 남은 공간은 스페이스가 채워짐
- TEXT
    - 긴 글을 저장할 때 사용
    - 수백자 이내의 문자열은 VARCHAR로 처리하는데 이보다 길면 TEXT를 사용
- TINYINT
    - -128 ~ 127까지의 정수를 저장할 때 사용
    - 1 또는 0만 저장한다면 Bool값과 같은 역할을 함
- DATETIME
    - 날짜/시간 정보를 담고 있음
    - 날짜만 담는 DATE, 시간만 담는 TIME자료형도 있음

### 컬럼의 옵션

- NULL / NOT NULL
    - 빈칸을 허용할지 여부를 묻는 옵션
    - comment컬럼 제외 전부 NOT NULL이므로 반드시 로우를 생성할 때 데이터를 입력해야함
- AUTO_INCREMENT
    - 숫자를 저절로 올리겠단 의미
    - id INT NOT NULL AUTO_INCREMENT → 처음에 철수란 사람의 데이터를 넣으면 철수의 id는 1, 그 다음 영희의
- UNSIGNED
    - 숫자 자료형에 적용
    - INT의 경우 기본적으로 음수 범위도 지원을 하는데 이걸 쓰면 0부터 저장할 수 있다(음수는 무시)
- ZEROFILL
    - 고정되어 있는 자릿수의 숫자에서 비어 있는 자리에 0을 넣어준다
    - INT(4)인데 1만 입력하면 0001이 되는 식…
- DEFAULT now()
    - DB 저장 시 해당 컬럼에 값이 없을 때 MySQL이 기본값을 넣어준다
- PRIMARY KEY
    - 로우를 대표하는 키
    - 로우들을 구별한 고유한 식별자로써의 역할을 함
- UNIQUE INDEX
    - 해당값이 고유해야 하는지에 대한 옵션
    - UNIQUE INDEX의 경우 데이터베이스가 별도로 컬럼을 관리하므로 조회 시 속도가 빨라짐
    - PK는 자동으로 UNIQUE INDEX를 포함

### 테이블 설정

- COMMENT
    - 테이블에 대한 보충 설명을 함
    - 필수는 아님…
- ENGINE
    - MYISAM
    - InnoDB

### 테이블 확인

명령어 : DESC 테이블명

📌 DROP TABLE 테이블명 → 테이블이 제거됨


# CRUD 작업하기

- Create, Read, Update, Delete의 첫글자를 모은 두문자어
- 데이터베이스에서 많이 수행하는 4가지 작업을 말함

## Create - 생성

데이터를 생성해서 데이터베이스에 넣는 작업을 말함 


- 데이터를 넣는 명령어 : `INSERT INTO [테이블병]([컬럼1],[컬럼2], … [컬럼n]);`
    - ex) `INSERT INTO nodejs.user (name, age, married, comment) VALUES ('nero', 32, 1, '자기소개2');`
    - 이때 id는 AUTO_INCREMENT에 의해, created_at은 DEFAULT값에 의해 자동으로 들어가짐

## Read - 조회

데이터에 있는 데이터를 조회하는 작업

1. 모든 데이터를 조회하는 명령어 : `SELECT * FROM [테이블명];`
2. 특정 컬럼만 조회하는 명령어 : `SELECT [컬럼1], [컬럼2] … FROM [테이블명];`

📌 WHERE절을 사용하면 특정 조건을 가진 데이터만 조회할 수도 있음

→ 예시) `SELECT name, age FROM nodejs.user WHERE married = 1 AND age>30;`

- 기혼+31살이상인 user의 name, age를 조회하라

📌ORDER BY [컬럼명][ASC | DESC] → 정렬할 수 있음

- ASC : 오름차순
- DESC : 내림차순

📌 LIMIT [숫자] : 조회할 로우의 개수를 설정

📌 OFFSET [건너뛸 숫자] : 

## Update - 수정

- 데이터베이스에 있는 데이터를 수정하는 작업
- 형식 : `UPDATE [테이블명] SET [컬럼명 = 바꿀 값] WHERE [조건];`
    - WHERE에서 AND나 OR을 이용해 조건 여러 개를 동시에 사용할 수도 있음
    - 예시) `UPDATE nodejs.user SET comment = '바꿀 내용' WHERE id = 2;`

## Delete - 삭제

- 데이터베이스에 있는 데이터를 삭제하는 작업
- 형식 : DELETE FROM [테이블명] WHERE [조건];
    - 예시 ) DELETE FROM nodejs.user WHERE id = 2;